---
output:
  pdf_document: 
    keep_tex: true
  html_document: default
  word_document: default
header-includes: \usepackage[labelformat=empty]{caption}
---

```{r child = 'setup.Rmd'}
```

```{r print-table-hyp, echo=FALSE, warning=FALSE}
# Note to use, knit to pdf and edit the tex file to remove the header
# up to the \begin{table}

thecap = "Hypotheses for covariates affecting landings.  $S_t$ is quarter 3 (July-September) catch in the current season, $S_{t-1}$ is quarter 3 catch in the previous season. $N_t$ is the post-monsoon October-March catch in the current season and $N_{t-1}$ is the October-March catch in the prior season. Because the fishing season is July-June, $N_t$ spans two calendar years. DD = hypotheses related to effects of past abundance (landings) on current abundance. S = hypotheses related to spawning. L = hypotheses related to larval and juvenile growth and survival. A = hypotheses affecting all ages."

fullcap = paste("Table ", ref("tab:hypotheses"), ". ", thecap, sep="")

DD1 = data.frame(
  Life="Age 2+",
  Hyp="DD1.  $S_t$ is dominated by mature age 2+ fish, thus abundance of the 1-yr and 2-yr ages in the prior season (Oct-Mar catch) should be correlated with the abundance of mature fish this year.",
  Response="$S_t$",
  Cov="$N_{t-1}$",
  stringsAsFactors=FALSE)

DD2 = data.frame(
  Life="Age 1-2",
  Hyp="DD2.  Abundance of 1-yr and 2-yr fish should be correlated with strength of the cohorts from the previous two seasons.  The quarter 3 catch, dominated by mature fish, in the prior two years is expected to be correlated with post-monsoon catch.",
  Response="$N_t$",
  Cov="$S_{t-1}$ and $S_{t-2}$",
  stringsAsFactors=FALSE)

DD3 = data.frame(
  Life="Age 2+",
  Hyp="DD3.  Because age 2 fish appear in the post-monsoon catch, we also expect the post-monsoon catch (dominated by age 1 and 2) in the previous season to be correlated with the post-monsoon catch in the current season. Post-monsoon catch two seasons prior should be minimally correlated with current post-monsoon catch.",
  Response="$N_t$",
  Cov="$N_{t-1}$",
  stringsAsFactors=FALSE)

HS1 = data.frame(
  Life="Spawn",
  Hyp="S1.  The onset of monsoon precipitation triggers movement of adults from offshore to spawning areas due to changes in salinity, turbulence or noise. Spent adults migrate inshore and are exposed to the fishery. Strong spawning affects post-monsoon catch in current and future seasons.",
  Response="$S_t$",
  Cov="Jun-Jul precipitation in year $t$",
  stringsAsFactors=FALSE)

HS2 = data.frame(
  Life="Spawn",
  Hyp="S2.  The level of precipitation in pre-monsoon months predicts spawning strength.",
  Response="$S_t$",
  Cov="Apr-May precipitation in year $t$",
  stringsAsFactors=FALSE)

HS3 = data.frame(
  Life="Spawn",
  Hyp="S3.  Precipitation initiates and supports spawning. Spawning affects post-monsoon catch in current and future seasons.",
  Response="$N_t$",
  Cov="Apr-May and Jun-Jul precipitation in year $t$ and $t-1$",
  stringsAsFactors=FALSE)


HS4 = data.frame(
  Life="Spawn",
  Hyp="S4.  Extremely high upwelling brings poorly oxygenated water and very low temperatures to the surface causing mature fish to avoid nearshore areas where they would be exposed to the fishery.",
  Response="$S_t$",
  Cov="Jun-Sep upwelling index in year $t$",
  stringsAsFactors=FALSE)

HS5 = data.frame(
  Life="Spawn",
  Hyp="S5.  Extreme heat events in the pre-spawning months cause mature fish to move offshore away from productive feeding areas leading to poor spawning condition. Poor recruitment leads to few 0-age in current season catch and 1-age fish in next season's catch.",
  Response="$N_t$",
  Cov="Nearshore Mar-May SST in year $t$ and $t-1$",
  stringsAsFactors=FALSE)

HL1 = data.frame(
  Life="Larval",
  Hyp="L1.  The prior year post-monsoon larval survival and growth is associated with higher future biomass. Larval growth and survival is highest in an intermediate temperature window. Low SST at this time is also indicative of strong upwelling which advects larvae into offshore waters where productivity is lower.",
  Response="$N_t$ and $S_t$",
  Cov="Nearshore SST during Oct-Dec in year t-1",
  stringsAsFactors=FALSE)

HL2 = data.frame(
  Life="Larval",
  Hyp="L2. Upwelling is associated with higher productivity and higher density of zooplankton, which leads to better larval and juvenile growth and survival.  The strength of summer upwelling should be associated with higher biomass in future years and the appearance of 0-age fish in post-monsoon catch. However, extremely strong upwelling brings poorly oxygenated water to the surface causing larval mortality and advects larvae offshore.",
  Response="$N_t$ and $S_t$",
  Cov="Jun-Sep upwelling index in year $t-1$ and $t$ (for $N_t$)",
  stringsAsFactors=FALSE)

HL3 = data.frame(
  Life="Larval",
  Hyp="L3. Chlorophyll blooms are signatures of high productivity from nutrient influx either due to upwelling or coastal inputs.  The monsoon bloom intensity should be associated with 0-year fish abundance in year $t$ and future sardine biomass.",
  Response="$N_t$ and $S_t$",
  Cov="Chl-a density Jun-Sep in year $t-1$ and $t$ (for $N_t$)",
  stringsAsFactors=FALSE)

HA1 = data.frame(
  Life="All ages",
  Hyp="A1. The changes brought about by the El NiÃ±o Southern Oscillation (ENSO) cycle have a variety of effects on environmental parameters (precipitation, SST, thermal fronts, Wind) which impacts spawning and early survival. This in turn impacts the overall abundance.",
  Response="$N_t$ and $S_t$",
  Cov="ONI in year t-1",
  stringsAsFactors=FALSE)


hyptable = rbind(DD1,DD2,DD3, HS1,HS2,HS3,HS4,HS5)[,-1]
colnames(hyptable)=c("Hypothesis", "Resp.", "Covariates")

kable(hyptable, "latex", caption=fullcap, escape=FALSE) %>%
  kableExtra::kable_styling(full_width=FALSE) %>%
  kableExtra::column_spec(1, width="8.5cm") %>%
  kableExtra::column_spec(2, width="1cm") %>%
  kableExtra::column_spec(3, width="3cm")
```


```{r, results="asis", echo=FALSE}
cat("\\clearpage")
```

```{r}
thecap = "Continued."

fullcap = paste("Table ", ref("tab:hypotheses"), ". ", thecap, sep="")
hyptable = rbind(HL1, HL2, HL3, HA1)[,-1]
colnames(hyptable)=c("Hypothesis", "Resp.", "Covariates")

kable(hyptable, "latex", caption=fullcap, escape=FALSE) %>%
  kableExtra::kable_styling(full_width=FALSE) %>%
  kableExtra::column_spec(1, width="8.5cm") %>%
  kableExtra::column_spec(2, width="1cm") %>%
  kableExtra::column_spec(3, width="3cm")
```
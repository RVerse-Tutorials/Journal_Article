---
output:
  html_document: default
  word_document: default
  pdf_document: 
    keep_tex: true
header-includes: \usepackage[labelformat=empty]{caption}
---

```{r child = 'setup.Rmd'}
```

```{r print-table-hyp, echo=FALSE, warning=FALSE}
# Note to use, knit to pdf and edit the tex file to remove the header
# up to the \begin{table}

thecap = "Hypotheses for covariates affecting landings.  $S_t$ is quarter 3 (July-September) catch in the current season, $S_{t-1}$ is quarter 3 catch in the previous season. $N_t$ is the post-monsoon October-March catch in the current season and $N_{t-1}$ is the October-March catch in the prior season. Because the fishing season is July-June, $N_t$ spans two calendar years. DD = hypotheses related to effects of past abundance (landings) on current abundance. S = hypotheses related to spawning. L = hypotheses related to larval and juvenile growth and survival. A = hypotheses affecting all ages."

fullcap = paste("Table ", ref("tab:hypotheses"), ". ", thecap, sep="")

DD1 = data.frame(
  Hyp="DD1.  $S_t \sim N_{t-1}$",
  Des = "$S_t$ is age 1+ age fish and reflects the 0-2yr fish in $N_{t-1}$ which have aged 3-6 months.",
  Response="$S_t$",
  Cov="$N_{t-1}$",
  stringsAsFactors=FALSE)

DD2 = data.frame(
  Hyp="DD2. $S_t \sim S_{t-1} + S_{t-2}$ \n $N_t \sim S_{t-1} + S_{t-2}$",
  Des = "$S_t$ is age 1+ fish and reflects the abundance of the spawning stock and cohort strength. If cohort strength persists over time, landings in the current season should correlate with landings in the previous two seasons.",
  Response="$S_t$ and $N_t$",
  Cov="$S_{t-1}$ and $S_{t-2}$",
  stringsAsFactors=FALSE)

DD3 = data.frame(
  Hyp="DD3.  $N_t \sim N_{t-1}$",
  Des = "$N_{t-1}$ includes age 0, 1, 2 and 2+ fish. Thus the 0, 1, and 2 yr fish will appear 1 year later in the $N_t$ landings.",
  Response="$N_t$",
  Cov="$N_{t-1}$",
  stringsAsFactors=FALSE)

HS1 = data.frame(
  Hyp="S1.  $S_t \sim$ Jun precipitation in year $t$",
  Des = "The magnitude of precipitation in June-July signals mature fish to spawn offshore, after which the spent adults migrate inshore to the fishery.",
  Response="$S_t$",
  Cov="Jun-Jul precipitation in year $t$",
  stringsAsFactors=FALSE)

HS2 = data.frame(
  Life="Spawn",
  Hyp="S2.  The level of precipitation in pre-monsoon months predicts spawning strength.",
  Response="$S_t$",
  Cov="Apr-May precipitation in year $t$",
  stringsAsFactors=FALSE)

HS3 = data.frame(
  Life="Spawn",
  Hyp="S3.  Precipitation initiates and supports spawning. Spawning affects post-monsoon catch in current and future seasons.",
  Response="$N_t$",
  Cov="Apr-May and Jun-Jul precipitation in year $t$ and $t-1$",
  stringsAsFactors=FALSE)


HS4 = data.frame(
  Life="Spawn",
  Hyp="S4.  Extremely high upwelling brings poorly oxygenated water and very low temperatures to the surface causing mature fish to avoid nearshore areas and leads to lower exposure to the fishery.",
  Response="$S_t$",
  Cov="Jun-Sep upwelling index in year $t$",
  stringsAsFactors=FALSE)

HS5 = data.frame(
  Life="Spawn",
  Hyp="S5.  Extreme heat events in the pre-spawning months cause mature fish to move offshore away from productive feeding areas leading to poor spawning condition. Poor recruitment leads to few 0-age in post-monsoon catch and few 1-age fish in next season catch.",
  Response="$S_t$ and $N_t$",
  Cov="Nearshore Mar-May SST in year $t$ and $t-1$",
  stringsAsFactors=FALSE)

HL1 = data.frame(
  Life="Larval",
  Hyp="L1.  Larval growth and survival is highest in an intermediate temperature window. The prior year post-monsoon larval survival and growth is associated with higher current year biomass.",
  Response="$N_t$ and $S_t$",
  Cov="Nearshore SST during Oct-Dec in year t-1",
  stringsAsFactors=FALSE)

HL2 = data.frame(
  Life="Larval",
  Hyp="L2. Upwelling is associated with higher productivity and higher density of zooplankton, which leads to better larval and juvenile growth and survival.  The strength of summer upwelling should be associated with higher biomass in future years and the appearance of 0-age fish in post-monsoon catch. However, extremely strong upwelling brings poorly oxygenated water to the surface causing larval mortality and offshore advection and causes mature fish to move offshore.",
  Response="$N_t$ and $S_t$",
  Cov="Jun-Sep upwelling index in year $t-1$ and $t$",
  stringsAsFactors=FALSE)

HL3 = data.frame(
  Life="Larval",
  Hyp="L3. Chlorophyll blooms are signatures of high productivity from nutrient influx either due to upwelling or coastal inputs.  The monsoon bloom intensity should be associated with 0-year fish abundance in year $t$ and future sardine biomass.",
  Response="$N_t$ and $S_t$",
  Cov="Chl-a density Jun-Sep in year $t-1$ and $t$ (for $N_t$)",
  stringsAsFactors=FALSE)

HA2 = data.frame(
  Life="All ages",
  Hyp="A2. The changes brought about by the El NiÃ±o/Southern Oscillation (ENSO) cycle have a variety of effects on environmental parameters (precipitation, SST, thermal fronts, wind) which impacts spawning and early survival with a 1-year lag. ",
  Response="$N_t$ and $S_t$",
  Cov="ONI in year t-1",
  stringsAsFactors=FALSE)

HA1 = data.frame(
  Life="All ages",
  Hyp="A1. The multi-year average SST is associated with a variety of factors which affect spawning and early survival and has been found to correlate with sardine recruitment (Checkley et al. 2017) and thus future biomass available to the fishery.",
  Response="$N_t$ and $S_t$",
  Cov="3-year average SST",
  stringsAsFactors=FALSE)

hyptable = rbind(DD1,DD2,DD3, HS1,HS2,HS3,HS4,HS5)[,-1]
colnames(hyptable)=c("Hypothesis", "Resp.", "Covariates")

kable(hyptable, "latex", caption=fullcap, escape=FALSE) %>%
  kableExtra::kable_styling(full_width=FALSE) %>%
  kableExtra::column_spec(1, width="10.5cm") %>%
  kableExtra::column_spec(2, width="1cm") %>%
  kableExtra::column_spec(3, width="3cm")
```

```{r}
thecap = "Continued."

fullcap = paste("Table ", ref("tab:hypotheses"), ". ", thecap, sep="")
hyptable = rbind(HL1, HL2, HL3, HA1, HA2)[,-1]
colnames(hyptable)=c("Hypothesis", "Resp.", "Covariates")

kable(hyptable, "latex", caption=fullcap, escape=FALSE) %>%
  kableExtra::kable_styling(full_width=FALSE) %>%
  kableExtra::column_spec(1, width="10.5cm") %>%
  kableExtra::column_spec(2, width="1cm") %>%
  kableExtra::column_spec(3, width="3cm")
```